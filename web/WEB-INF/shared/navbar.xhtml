<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets">
    <ui:composition>
        <div class="text-center p-2">
            <h1>Java Web shop</h1>
            <h3>Find everything you've been looking for, and more.</h3>
        </div>
        <nav class="navbar navbar-expand-md bg-dark navbar-dark sticky-top">
            <!-- Toggler/collapsibe Button -->
            <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#collapsibleNavbar">
                <span class="navbar-toggler-icon"></span>
            </button>

            <!-- Navbar links -->
            <div class="collapse navbar-collapse" id="collapsibleNavbar">
                <ul class="navbar-nav mx-auto">
                    <li class="nav-item">
                        <h:link value="Home" outcome="/index" class="nav-link" />
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#">Categories</a>
                    </li>
                </ul>
            </div>
            <div class="right-align d-flex align-items-center text-white">
                <h:panelGroup rendered="#{not empty user}">
                    <span class="mr-2">Hello  <h:outputText value="#{user.username}"/> !</span>
                    <div class="dropdown">
                        <button class="btn btn-secondary dropdown-toggle" type="button" id="dropdownMenuButton" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                            <i class="fas fa-user-circle fa-2x"></i>
                        </button>
                        <div class="dropdown-menu dropdown-menu-right" aria-labelledby="dropdownMenuButton">
                            <h:link rendered="#{request.isUserInRole('user')}" outcome="/secured/user/manageAccount.xhtml" class="dropdown-item">Manage account</h:link>
                            <h:link rendered="#{request.isUserInRole('admin')}" outcome="/secured/admin/adminPanel.xhtml" class="dropdown-item">Admin panel</h:link>
                            <h:form>
                                <h:commandLink class="dropdown-item" value="Logout" action="#{login.logout}"/>
                            </h:form>
                        </div>
                    </div>
                </h:panelGroup>
                <h:panelGroup rendered="#{empty user}">
                    <button class="btn text-white px-1" onclick="window.location.href = '/JavaProjekt/faces/login.xhtml'; return false;">
                        <i class="fas fa-user-circle fa-2x"></i>
                    </button>
                </h:panelGroup>

                <button class="btn text-white px-1" onclick="window.location.href = '/JavaProjekt/faces/cart.xhtml'; return false;">
                    <i class="fas fa-shopping-cart fa-2x"></i>
                </button>
            </div>
        </nav>

    </ui:composition>
</html>

